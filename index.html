<!DOCTYPE html>
<html lang="th">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDPA | ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun&display=swap" rel="stylesheet">
    <style>
        /* ‡πÉ‡∏ä‡πâ CSS ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì */
        body { font-family: 'Sarabun', sans-serif; margin: 30px; background-color: #f5f5f5; }
        .container { max-width: 500px; margin: auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        .hidden { display: none !important; }
        img { width: 100px; height: 100px; object-fit: cover; border-radius: 50%; display: block; margin: 0 auto 20px; border: 2px solid #ccc; }
        h2, h3, h4 { text-align: center; color: #2c3e50; }
        .pdpa-box { max-height: 300px; overflow-y: auto; border: 1px solid #ccc; padding: 15px; border-radius: 8px; background-color: #E8F0FE; margin-bottom: 15px; }
        /* ‡πÉ‡∏™‡πà Loading Styles ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà */
        #loadingOverlay { display: flex; justify-content: center; align-items: center; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255, 255, 255, 0.8); z-index: 10000; }
        .lds-ring { display: inline-block; position: relative; width: 80px; height: 80px; }
        .lds-ring div { box-sizing: border-box; display: block; position: absolute; width: 64px; height: 64px; margin: 8px; border: 8px solid #2d87f0; border-radius: 50%; animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite; border-color: #2d87f0 transparent transparent transparent; }
        @keyframes lds-ring { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .loading-text { margin-top: 20px; font-size: 1.2rem; color: #333; }
    </style>
</head>
<body>
    <div id="loadingOverlay">
        <div style="text-align:center;">
            <div class="lds-ring"><div></div><div></div><div></div><div></div></div>
            <p class="loading-text" id="loadingText">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ LIFF...</p>
        </div>
    </div>

    <div class="container hidden" id="mainContent">
        <h2>üõ†Ô∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ PDPA</h2>
        <img id="profileImage">
        <input type="hidden" id="userId" readonly>
        <input type="hidden" id="displayName" readonly>
        <input type="hidden" id="logRowIndex"> <p id="alertMessage" class="alert alert-danger text-center"></p>

        <div id="pdpaUpdateSection" class="hidden">
            <h4 style="text-decoration: underline;">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h4>
            <p><strong>‡∏¢‡∏®-‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•:</strong> <span id="fullUserName" style="color: blue;">-</span></p>
            <p><strong>‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô:</strong> <span id="idCardDisplay" style="color: green;">-</span></p>
            <p><strong>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:</strong> <span id="currentStatusDisplay" style="font-weight: bold;">-</span></p>

            <hr>
            
            <h3>‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏• (PDPA)</h3>
            <div class="pdpa-box" id="pdpaContent"></div>

            <h4 style="margin-top: 20px;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏´‡∏°‡πà (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï)</h4>
            <div class="consent-area text-center" id="consentSection">
                <input type="radio" id="consentCheckbox_1" name="pdpa_consent_new" value="1" style="vertical-align: middle; margin-right: 5px;">
                <label for="consentCheckbox_1" style="display: inline;">‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°</label>
                
                <input type="radio" id="consentCheckbox_0" name="pdpa_consent_new" value="0" style="vertical-align: middle; margin-right: 5px; margin-left: 20px;">
                <label for="consentCheckbox_0" style="display: inline;">‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°</label>
            </div>
            
            <br>
            <button type="button" class="btn btn-warning btn-lg w-100" onclick="updateConsent()" id="updateBtn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
            <p id="consentMessage" style="margin-top: 10px; color: red;"></p>
        </div>
        
        <button type="button" class="btn btn-info btn-lg w-100 mt-3" id="closeBtn" onclick="closeLiff()">‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á</button>
    </div>
    
    <script src="https://static.line-scdn.net/liff/edge/versions/2.9.0/sdk.js"></script>
    <script>
        // üö® **‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô URL ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô URL ‡∏ó‡∏µ‡πà Deploy ‡πÅ‡∏•‡πâ‡∏ß‡∏Ç‡∏≠‡∏á GAS Script ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì**
        const GAS_URL = "https://script.google.com/macros/s/AKfycbztxMsVpuUKuDdHM9JoOb2GxvO4A6ZzTrYhLeFvWrB-HiIZtWo7dISYH2MhaPRGZzF0/exec";
        const LIFF_ID = "2008429931-5gKEregX"; // üö® **‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô LIFF ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì**

        function showLoading(message = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...") {
            document.getElementById("loadingText").textContent = message;
            document.getElementById("loadingOverlay").style.display = "flex";
        }
        function hideLoading() {
            document.getElementById("loadingOverlay").style.display = "none";
        }
        function setAlert(message, type = 'danger') {
            const el = document.getElementById("alertMessage");
            el.textContent = message;
            el.className = `alert alert-${type} text-center`;
            el.classList.remove('hidden');
        }

        // 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° UI
        function runApp() {
            liff.getProfile().then(profile => {
                document.getElementById("profileImage").src = profile.pictureUrl;
                document.getElementById("userId").value = profile.userId;
                document.getElementById("displayName").value = profile.displayName;
                document.getElementById("mainContent").classList.remove("hidden");

                fetch(GAS_URL, {
                    method: 'POST',
                    body: new URLSearchParams({
                        action: 'checkExistingUser',
                        userId: profile.userId
                    })
                })
                .then(res => res.json())
                .then(data => {
                    hideLoading();

                    if (data.status === 'exists_ready_to_update') {
                        // ‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                        setAlert("‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ PDPA ‡πÑ‡∏î‡πâ", 'warning');
                        document.getElementById("pdpaUpdateSection").classList.remove("hidden");
                        
                        // ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                        const currentStatus = data.currentConsent;
                        document.getElementById("logRowIndex").value = data.rowIndex;
                        document.getElementById("fullUserName").textContent = data.fullUserName;
                        document.getElementById("idCardDisplay").textContent = data.idCard;
                        document.getElementById("pdpaContent").innerHTML = data.pdpaContent;
                        document.getElementById("currentStatusDisplay").textContent = currentStatus === '1' ? '‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°' : '‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°';

                        // Logic ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏´‡∏°‡πà
                        const radio1 = document.getElementById("consentCheckbox_1");
                        const radio0 = document.getElementById("consentCheckbox_0");

                        if (currentStatus === '1') {
                            // ‡πÄ‡∏Ñ‡∏¢‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£
                            radio1.disabled = false;
                            radio0.disabled = false;
                            setAlert("‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠ '‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°' ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô '‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°' ‡πÑ‡∏î‡πâ", 'info');
                        } else if (currentStatus === '0') {
                            // ‡πÄ‡∏Ñ‡∏¢‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ '‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°'
                            radio1.disabled = false;
                            radio0.disabled = true; // ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å '‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°' ‡∏ã‡πâ‡∏≥‡πÑ‡∏î‡πâ
                            radio0.checked = true; // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏ß‡πâ ‡πÅ‡∏ï‡πà disabled
                            setAlert("‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠ '‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°' **‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å '‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°'** ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞", 'danger');
                        }
                        
                    } else if (data.status === 'notExists') {
                        // ‡πÇ‡∏´‡∏°‡∏î‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà
                        setAlert(data.message + " ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô PDPA", 'success');
                        document.getElementById("pdpaUpdateSection").classList.add("hidden");
                    } else {
                        // ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏≠‡∏∑‡πà‡∏ô‡πÜ
                        setAlert(data.message, 'danger');
                        document.getElementById("pdpaUpdateSection").classList.add("hidden");
                    }
                })
                .catch(err => {
                    hideLoading();
                    setAlert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: " + err.message, 'danger');
                    console.error('Fetch error:', err);
                });
                
            }).catch(err => {
                hideLoading();
                setAlert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå LINE: " + err.message, 'danger');
            });
        }

        // 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
        function updateConsent() {
            const selectedConsent = document.querySelector('input[name="pdpa_consent_new"]:checked');
            const idCard = document.getElementById("idCardDisplay").textContent.trim();
            const logRowIndex = document.getElementById("logRowIndex").value;
            const currentStatus = document.getElementById("currentStatusDisplay").textContent === '‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°' ? '1' : '0';

            if (!selectedConsent) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏´‡∏°‡πà");
                return;
            }
            
            const newConsentStatus = selectedConsent.value;

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡∏´‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏¢ '‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°' ‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô '‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°' ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ)
            if (currentStatus === '0' && newConsentStatus === '0') {
                alert("‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏•‡∏∑‡∏≠‡∏Å '‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°' ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å '‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°' ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô");
                return;
            }
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ã‡πâ‡∏≥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            if (currentStatus === newConsentStatus) {
                alert("‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß");
                return;
            }


            showLoading("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...");
            
            fetch(GAS_URL, {
                method: "POST",
                body: new URLSearchParams({
                    action: "updateAndMigrateConsent",
                    idCard: idCard,
                    newConsentStatus: newConsentStatus,
                    logRowIndex: logRowIndex 
                })
            })
            .then(res => res.json())
            .then(data => {
                hideLoading();
                if (data.status === "success") {
                    alert(data.message); // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å H1
                    setAlert(data.message, 'success');
                    document.getElementById("updateBtn").classList.add("hidden");
                    document.getElementById("consentSection").classList.add("hidden");
                } else {
                    alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + data.message);
                    setAlert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + data.message, 'danger');
                }
            })
            .catch(err => {
                hideLoading();
                alert("‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: " + err.message);
                console.error(err);
                setAlert("‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: " + err.message, 'danger');
            });
        }

        function closeLiff() {
            liff.closeWindow();
        }

        // LIFF initialization
        liff.init({ liffId: LIFF_ID }, () => {
            if (liff.isLoggedIn()) {
                runApp();
            } else {
                liff.login();
            }
        }, err => {
            hideLoading();
            setAlert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô LIFF: " + err.message, 'danger');
            console.error('LIFF init error:', err);
        });
    </script>
</body>
</html>
